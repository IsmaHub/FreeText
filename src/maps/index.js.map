{"version":3,"sources":["autowriting.js","cursor.js","index.js","textblock.js"],"names":["Autowriting","opt","cursorNumber","_cursorNumber","element","$","_words","words","_cursors","_jndexStart","_indexStart","_keepWord","keepWord","_stopBucle","_isBucle","bucle","_init","e","start","setWords","_splitWords","forEach","word","push","name","letters","split","length","_addEvents","_inInterval","_startBucle","Error","i","j","cursor","_clearIntervals","_intervalRemove","setInterval","_inRemoveInterval","prev","remove","clearInterval","index","jndex","_intervalStart","_inStartInterval","iStart","jStart","setTimeout","_removeWord","letter","before","newWords","Cursor","elemContent","_atributte","_elemContent","_insert","_addBlink","append","_blink","window","animate","opacity","blink","FTX","FreeText","_cursorCount","undefined","autowriting","TextBlock","_focus","focus","_bodyElement","_cursor","_generateEvents","_eventFocus","_eventKeyDown","click","is","target","has","keydown","key"],"mappings":"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","file":"../index.js","sourcesContent":["class Autowriting{\r\n    constructor(opt, cursorNumber){\r\n        this._cursorNumber = cursorNumber;\r\n        this.element = $(opt.element);\r\n        this._words = opt.words || [];\r\n        this._cursors = [];\r\n        this._jndexStart = 0;\r\n        this._indexStart = 0;\r\n        this._keepWord = opt.keepWord || 800;\r\n        this._stopBucle = false;\r\n        this._isBucle = opt.bucle === false? opt.bucle : true;\r\n        this._init(this.element);\r\n    }\r\n    _init(e){\r\n        e.start = this.start;\r\n        e.setWords = this.setWords;\r\n        this._splitWords = [];\r\n        this._words.forEach(function(word) {\r\n           this._splitWords.push({name: word, letters: word.split(''), length: word.length-1});\r\n        }, this);\r\n        this._addEvents(e);\r\n    }\r\n    \r\n    start(){\r\n        if(!this._inInterval()){\r\n            this._startBucle(this._indexStart, this._jndexStart);\r\n        }else{\r\n            throw new Error(\"Can't use start method if It is started currenly. Maybe you want use the restart method\");\r\n        }\r\n        return this;\r\n    }\r\n    \r\n    continue(){\r\n        this._stopBucle = false;\r\n        return this;\r\n    }\r\n\r\n    _removeWord(i,j){\r\n        let cursor = $('[free-text-cursor-'+this._cursorNumber+']');\r\n        if(!this._isBucle && !this._splitWords[i+1]){\r\n            this._clearIntervals();\r\n            return;\r\n        }\r\n        this._intervalRemove = setInterval(()=>{\r\n            this._inRemoveInterval = true;\r\n            if(!this._stopBucle){\r\n                if(this._splitWords[i].letters[j-1]){\r\n                    cursor.prev().remove();\r\n                    j--;\r\n                }else{\r\n                    clearInterval(this._intervalRemove);\r\n                    i++;\r\n                    if(this._splitWords[i]){\r\n                        this._startBucle(i);\r\n                    }else if(this._isBucle){\r\n                            this._startBucle();\r\n                        }else{\r\n                            this._clearIntervals();\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n        },100);\r\n    }\r\n\r\n    _startBucle(index = 0, jndex = 0){\r\n        let cursor = $('[free-text-cursor-'+this._cursorNumber+']');\r\n        this._indexStart = index;\r\n        this._jndexStart = jndex;\r\n        this._intervalStart = setInterval(()=>{\r\n            this._inStartInterval = true;\r\n            if(!this._stopBucle){\r\n                if(!this._splitWords[this._indexStart].letters[this._jndexStart]){\r\n                    clearInterval(this._intervalStart);\r\n                    let iStart = this._indexStart;\r\n                    let jStart = this._jndexStart;\r\n                    setTimeout(()=> {\r\n                        this._removeWord(iStart,jStart);   \r\n                    }, this._keepWord);\r\n                    this._jndexStart = 0;\r\n                    this._indexStart++;\r\n                    return;\r\n                }\r\n                if(!this._splitWords[this._indexStart]){\r\n                    clearInterval(this._intervalStart);\r\n                    this._startBucle();\r\n                    return;\r\n                }else{\r\n                    let letter = this._splitWords[this._indexStart].letters[this._jndexStart];\r\n                    $(cursor).before('<span auto-letter-'+this._cursorNumber+'>'+letter+'</span>');\r\n                    this._jndexStart++;\r\n                }\r\n            }\r\n        },300);\r\n    }\r\n\r\n    stop(){\r\n        this._stopBucle = true;\r\n        return this;\r\n    }\r\n\r\n    _inInterval(){\r\n        return this._inRemoveInterval || this._inStartInterval;\r\n    }\r\n    _clearIntervals(){\r\n        clearInterval(this._intervalRemove);\r\n        clearInterval(this._intervalStart);\r\n    }\r\n    clear(){\r\n        this._clearIntervals();\r\n        this._intervalRemove = null;\r\n        this._intervalStart = null;\r\n        this._inRemoveInterval = false;\r\n        this._inStartInterval = false;\r\n        $('[auto-letter-'+this._cursorNumber+']').remove();\r\n        $('[free-text-cursor-'+this._cursorNumber+']').remove();\r\n        return this;\r\n    }\r\n\r\n    setWords(newWords){\r\n        if(newWords){\r\n            this._words = newWords;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    _addEvents(e){\r\n    }\r\n}","class Cursor{\r\n    constructor(elemContent, cursorNumber){\r\n        this._atributte = 'free-text-cursor-'+cursorNumber;\r\n        this._elemContent = $(elemContent);\r\n        this._init();\r\n    }\r\n\r\n    _init(){\r\n        this._insert();\r\n        this._addBlink();\r\n    }\r\n\r\n    _insert(){\r\n        this._elemContent.append('<span '+this._atributte+'>|</span>');\r\n    }\r\n\r\n    _addBlink(){\r\n        let e = $('['+this._atributte+']');\r\n        this._blink = window.setInterval(function(){\r\n            e.animate({opacity:'toggle'},200);\r\n        },600);\r\n    }\r\n\r\n    _removeBlink(){\r\n        clearInterval(this.blink);\r\n    }\r\n}","let FTX = null;\r\nclass FreeText {\r\n    constructor(){\r\n        if(!FTX){\r\n            FTX = this;\r\n        }else{\r\n            throw new Error(\"Can't instantiate the root FreeText class more than one time. Use FTX object.\");\r\n        }\r\n        this._cursorCount = 0;\r\n        return FTX;\r\n    }\r\n    \r\n    autowriting(opt){\r\n        if(opt.element == null || opt.element == undefined){\r\n            throw new Error('The param \"element\" is required');\r\n        }\r\n        new Cursor(opt.element, this._cursorCount);\r\n        let autowriting = new Autowriting(opt, this._cursorCount);\r\n        this._cursorCount++;\r\n        return autowriting;\r\n    }\r\n}\r\nFTX = new FreeText();","class TextBlock{\r\n    constructor(opt, cursorNumber){\r\n        this.element = $(opt.element);\r\n        this._cursorNumber = cursorNumber;\r\n        this._focus = opt.focus || false;\r\n        this._bodyElement = $('body');\r\n        this._cursor = $('[free-text-cursor-'+this._cursorNumber+']');\r\n        this._init();\r\n    }\r\n\r\n    _init(){\r\n        this._generateEvents();\r\n    }\r\n\r\n    _generateEvents(){\r\n        this._eventFocus();\r\n        this._eventKeyDown();\r\n    }\r\n\r\n    _eventFocus(){\r\n         this._bodyElement.click((e)=>{\r\n            if (!this.element.is(e.target) && this.element.has(e.target).length === 0){\r\n                this._focus = false;\r\n            }else{\r\n                this._focus = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    _eventKeyDown(){\r\n        this._bodyElement.keydown((e)=>{\r\n            if(this._focus){\r\n                this._cursor.before('<span text-letter-'+this._cursorNumber+'>'+e.key+'</span>');\r\n            }\r\n        })\r\n    }\r\n\r\n    getText(){\r\n\r\n    }\r\n\r\n}"]}