{"version":3,"sources":["autowriting.js","cursor.js","index.js","textblock.js"],"names":["Autowriting","opt","cursorNumber","cursor","_cursorNumber","element","$","_words","words","_cursor","_jndexStart","_indexStart","_keepWord","keepWord","_speedDelete","speedDelete","_speedWrite","speedWrite","_hideCursorToEnd","hideCursorToEnd","_stopBucle","_isBucle","bucle","_init","e","start","setWords","_cursorSelector","_splitWords","forEach","word","push","name","letters","split","length","_addEvents","_inInterval","_startBucle","Error","i","j","hideCursor","_clearIntervals","_intervalRemove","setInterval","_inRemoveInterval","prev","remove","clearInterval","index","jndex","_intervalStart","_inStartInterval","iStart","jStart","setTimeout","_removeWord","letter","before","_clearInftervals","newWords","Cursor","elemContent","_atributte","_elemContent","_insert","_addBlink","append","_blink","window","animate","opacity","_removeBlink","hide","FTX","FreeText","_cursorCount","undefined","autowriting","TextBlock","_focus","focus","_bodyElement","_generateEvents","_eventFocus","_eventKeyDown","click","is","target","has","keydown","key"],"mappings":"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","file":"../index.js","sourcesContent":["class Autowriting{\r\n    constructor(opt, cursorNumber, cursor){\r\n        this._cursorNumber = cursorNumber;\r\n        this.element = $(opt.element);\r\n        this._words = opt.words || [];\r\n        this._cursor = cursor;\r\n        this._jndexStart = 0;\r\n        this._indexStart = 0;\r\n        this._keepWord = opt.keepWord || 800;\r\n        this._speedDelete = opt.speedDelete || 30;\r\n        this._speedWrite = opt.speedWrite || 100;\r\n        this._hideCursorToEnd = opt.hideCursorToEnd === false? opt.hideCursorToEnd : true;\r\n        this._stopBucle = false;\r\n        this._isBucle = opt.bucle === false? opt.bucle : true;\r\n        this._init(this.element);\r\n    }\r\n    _init(e){\r\n        e.start = this.start;\r\n        e.setWords = this.setWords;\r\n        this._cursorSelector = $('[free-text-cursor-'+this._cursorNumber+']');\r\n        this._splitWords = [];\r\n        this._words.forEach(function(word) {\r\n           this._splitWords.push({name: word, letters: word.split(''), length: word.length-1});\r\n        }, this);\r\n        this._addEvents(e);\r\n    }\r\n    \r\n    start(){\r\n        if(!this._inInterval()){\r\n            this._startBucle(this._indexStart, this._jndexStart);\r\n        }else{\r\n            throw new Error(\"Can't use start method if It is started currenly. Maybe you want use the restart method\");\r\n        }\r\n        return this;\r\n    }\r\n    \r\n    continue(){\r\n        this._stopBucle = false;\r\n        return this;\r\n    }\r\n\r\n    _removeWord(i,j){\r\n        if(!this._isBucle && !this._splitWords[i+1]){\r\n            if(this._hideCursorToEnd){\r\n                this._cursor.hideCursor();\r\n            }\r\n            this._clearIntervals();\r\n            return;\r\n        }\r\n        this._intervalRemove = setInterval(()=>{\r\n            this._inRemoveInterval = true;\r\n            if(!this._stopBucle){\r\n                if(this._splitWords[i].letters[j-1]){\r\n                    this._cursorSelector.prev().remove();\r\n                    j--;\r\n                }else{\r\n                    clearInterval(this._intervalRemove);\r\n                    i++;\r\n                    if(this._splitWords[i]){\r\n                        this._startBucle(i);\r\n                    }else if(this._isBucle){\r\n                            this._startBucle();\r\n                        }else{\r\n                            this._clearIntervals();\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n        },this._speedDelete);\r\n    }\r\n\r\n    _startBucle(index = 0, jndex = 0){\r\n        this._indexStart = index;\r\n        this._jndexStart = jndex;\r\n        this._intervalStart = setInterval(()=>{\r\n            this._inStartInterval = true;\r\n            if(!this._stopBucle){\r\n                if(!this._splitWords[this._indexStart].letters[this._jndexStart]){\r\n                    clearInterval(this._intervalStart);\r\n                    let iStart = this._indexStart;\r\n                    let jStart = this._jndexStart;\r\n                    setTimeout(()=> {\r\n                        this._removeWord(iStart,jStart);   \r\n                    }, this._keepWord);\r\n                    this._jndexStart = 0;\r\n                    this._indexStart++;\r\n                    return;\r\n                }\r\n                if(!this._splitWords[this._indexStart]){\r\n                    clearInterval(this._intervalStart);\r\n                    this._startBucle();\r\n                    return;\r\n                }else{\r\n                    let letter = this._splitWords[this._indexStart].letters[this._jndexStart];\r\n                    $(this._cursorSelector).before('<span auto-letter-'+this._cursorNumber+'>'+letter+'</span>');\r\n                    this._jndexStart++;\r\n                }\r\n            }\r\n        },this._speedWrite);\r\n    }\r\n\r\n    stop(){\r\n        this._stopBucle = true;\r\n        return this;\r\n    }\r\n\r\n    _inInterval(){\r\n        return this._inRemoveInterval || this._inStartInterval;\r\n    }\r\n    _clearIntervals(){\r\n        clearInterval(this._intervalRemove);\r\n        clearInterval(this._intervalStart);\r\n    }\r\n    clear(){\r\n        this._clearInftervals();\r\n        this._intervalRemove = null;\r\n        this._intervalStart = null;\r\n        this._inRemoveInterval = false;\r\n        this._inStartInterval = false;\r\n        $('[auto-letter-'+this._cursorNumber+']').remove();\r\n        this._cursorSelector.remove();\r\n        return this;\r\n    }\r\n\r\n    setWords(newWords){\r\n        if(newWords){\r\n            this._words = newWords;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    _addEvents(e){\r\n    }\r\n}","class Cursor{\r\n    constructor(elemContent, cursorNumber){\r\n        this._atributte = 'free-text-cursor-'+cursorNumber;\r\n        this._elemContent = $(elemContent);\r\n        this._init();\r\n    }\r\n\r\n    _init(){\r\n        this._insert();\r\n        this._cursor = $('['+this._atributte+']');\r\n        this._addBlink();\r\n    }\r\n\r\n    _insert(){\r\n        this._elemContent.append('<span '+this._atributte+'>|</span>');\r\n    }\r\n\r\n    _addBlink(){\r\n        let e = $('['+this._atributte+']');\r\n        this._blink = window.setInterval(function(){\r\n            e.animate({opacity:'toggle'},200);\r\n        },600);\r\n    }\r\n\r\n    _removeBlink(){\r\n        clearInterval(this._blink);\r\n    }\r\n\r\n    hideCursor(){\r\n        this._removeBlink();\r\n        this._cursor.hide();\r\n    }\r\n}","let FTX = null;\r\nclass FreeText {\r\n    constructor(){\r\n        if(!FTX){\r\n            FTX = this;\r\n        }else{\r\n            throw new Error(\"Can't instantiate the root FreeText class more than one time. Use FTX object.\");\r\n        }\r\n        this._cursorCount = 0;\r\n        return FTX;\r\n    }\r\n    \r\n    autowriting(opt){\r\n        if(opt.element == null || opt.element == undefined){\r\n            throw new Error('The param \"element\" is required');\r\n        }\r\n        let cursor = new Cursor(opt.element, this._cursorCount);\r\n        let autowriting = new Autowriting(opt, this._cursorCount, cursor);\r\n        this._cursorCount++;\r\n        return autowriting;\r\n    }\r\n}\r\nFTX = new FreeText();","class TextBlock{\r\n    constructor(opt, cursorNumber){\r\n        this.element = $(opt.element);\r\n        this._cursorNumber = cursorNumber;\r\n        this._focus = opt.focus || false;\r\n        this._bodyElement = $('body');\r\n        this._cursor = $('[free-text-cursor-'+this._cursorNumber+']');\r\n        this._init();\r\n    }\r\n\r\n    _init(){\r\n        this._generateEvents();\r\n    }\r\n\r\n    _generateEvents(){\r\n        this._eventFocus();\r\n        this._eventKeyDown();\r\n    }\r\n\r\n    _eventFocus(){\r\n         this._bodyElement.click((e)=>{\r\n            if (!this.element.is(e.target) && this.element.has(e.target).length === 0){\r\n                this._focus = false;\r\n            }else{\r\n                this._focus = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    _eventKeyDown(){\r\n        this._bodyElement.keydown((e)=>{\r\n            if(this._focus){\r\n                this._cursor.before('<span text-letter-'+this._cursorNumber+'>'+e.key+'</span>');\r\n            }\r\n        })\r\n    }\r\n\r\n    getText(){\r\n\r\n    }\r\n\r\n}"]}